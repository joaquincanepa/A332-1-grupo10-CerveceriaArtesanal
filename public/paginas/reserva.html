<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--FontAwesome-->
    <script src="https://kit.fontawesome.com/ac8c089c85.js" crossorigin="anonymous"></script>
    <!--Google Fonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!--Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!--AOS animacion-->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!--Animated animacion-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <!--CSS-->
    <link rel="stylesheet" href="../css/main.css">
    <title>Parcial Laboratorio 3 | Reserva</title>
</head>

<body>
    <header>
        <!-- NavBar-->
        <nav class="navbar navbar-expand-lg navbar-light">
            <div class="container-fluid">
                <a class="navbar-brand" href="../index.html"><img class="nav-logo" src="../imagenes/Logo_cerveza1.png"
                        alt="Logo"></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav animate__animated animate__fadeInLeft">
                        <li class="nav-item ">
                            <a class="nav-link active" aria-current="page" href="../index.html">Inicio</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="./sobreNosotros.html">Sobre Nosotros</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="./productos.html">Productos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="./contacto.html">Contacto</a>
                        </li>
                    </ul>
                    <button type="button" class="btn-principal"><a href="./reserva.html">Reserva</a></button>
                </div>
            </div>
        </nav>
    </header>
    <main>
        <!--titulo Reserva-->
        <section class="title" data-aos="fade-up">
            <article class="row">
                <div class="col-12">
                    <h1>Reserve su mesa aqui</h1>
                </div>
            </article>
        </section>
        <!-- Inicio Form Reserva-->
        <section class="reserva container" data-aos="fade-up">
            <article class="row">
                <div class="col-12">
                    <form class="formulario" name="formualario" id="formulario">
                        <div class="col-12 text-start">
                            <h2>Complete para reservar su mesa</h2>
                            <hr>
                        </div>
                        <div class="row">
                            <div class="col-12 col-md-6 mb-3">
                                <label for="name" class="form-label">Nombre</label>
                                <input type="text" class="input" id="nameRes" name="nombreRes" placeholder="Su nombre">
                            </div>
                            <div class="col-12 col-md-6 mb-3">
                                <label for="email" class="form-label">Email</label>
                                <input type="email" class="input" id="emailRes" name="emailRes"
                                    placeholder="cerveceriaArtesanalUTN@gmail.com">
                            </div>
                            <div class="col-12 col-md-6 mb-3">
                                <label for="telefono" class="form-label">Teléfono</label>
                                <input type="tel" class="input" id="telefonoRes" name="telefonoRes" placeholder="1122334455">
                            </div>
                            <div class="col-12 col-md-6 mb-2">
                                <p class="form-label">Cantidad de personas?</p>
                                <select class="input" id="cantidadPerRes" name="cantidadPerRes" aria-label="Default select example">
                                    <option selected>1</option>
                                    <option value="1">2</option>
                                    <option value="2">3</option>
                                    <option value="3">4</option>
                                    <option value="3">5</option>
                                    <option value="3">6</option>
                                    <option value="3">7</option>
                                    <option value="3">mas</option>
                                </select>
                            </div>
                            <div class="col-12 col-md-6 mb-2">
                                <label class="form-label" for="date">Fecha</label>
                                <input class="input" type="date" id="fechaRes" name="fechaRes">
                            </div>
                            <div class="col-12 col-md-6 mb-2">
                                <label class="form-label" for="time">Hora:</label>
                                <input class="input" type="time" id="horaRes" name="horaRes">
                            </div>
                            <div class="col-12 col-md-6 mb-2">
                                <p class="form-label">Tipo de Mesa?</p>
                                <select class="input" aria-label="Default select example" id="tipoMesaRes" name="tipoMesaRes">
                                    <option selected>adentro</option>
                                    <option value="1">afuera</option>
                                </select>
                            </div>
                            <div class="col-12 col-md-6 mb-2">
                                <p class="form-label">Alguna preferencia?</p>
                                <select class="input" aria-label="Default select example" id="preferenciaRes" name="preferenciaRes">
                                    <option selected>No</option>
                                    <option value="1">Si</option>>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="textarea" class="form-label">Si quiere agregar algo mas indiquenos aqui
                                    abajo:</label>
                                <textarea class="input text-area" id="textarea" placeholder="Deje su mensaje acá"
                                    rows="3" id="comentarioRes" name="comentarioRes"></textarea>
                            </div>
                        </div>
                        <button type="submit" class="btn-principal">Enviar</button>
                    </form>
                </div>
            </article>
        </section>
    </main>
    <!-- Fin Form Reserva-->
    <!--seccion footer-->
    <footer>
        <div class="container_footer" data-aos="fade-up">
            <div class="box__footer">
                <h2>Ayuda</h2>
                <a href="#">Contacto</a>
                <a href="#">Comprar</a>
                <a href="#">Desktop Desarrollo</a>
                <a href="#">Android Desarrollo</a>
            </div>
            <div class="box__footer">
                <h2>Acerca de</h2>
                <a href="#">¿Quienes somos?</a>
                <a href="#">preguntas frecuentes</a>
                <a href="#">Procesos</a>
                <a href="#">Ubicacion</a>
            </div>
            <div class="box__footer">
                <h2>Redes Sociales</h2>
                <a class="facebook fa-brands fa-facebook-square" href="#"> Facebook</a>
                <a class="Twitter fa-brands fa-twitter-square" href="#"> Twitter</a>
                <a class="linkedin fa-brands fa-linkedin" href="#"> Linkedin</a>
                <a class="Instagram fa-brands fa-instagram" href="#"> Instagram</a>
            </div>
            <div class="box__footer">
                <h2>Ubicacion</h2>
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3281.7010899866723!2d-58.36706772485265!3d-34.66225106059071!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x95a3333416c85145%3A0x20226ada1b9fc4b2!2sUTN%20avellaneda!5e0!3m2!1ses-419!2sar!4v1720717385925!5m2!1ses-419!2sar"
                width="200" height="150" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
            
        </div>
        <div class="box__copyright">
            <hr>
            <p>Todos los derechos reservados, 2024. Página sin fines de lucro</p>
            <b>Joaquin Canepa /Alí Ansidey</b>
        </div>
    </footer>
    <!--seccion footer-->
    <!--Footer Section-->
    <!--js bootstrap-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    </script>
    <!--AOS Script-->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init();
    </script>
  <script type="module">

    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.3/firebase-app.js';
    import { getFirestore, doc, collection, addDoc, setDoc } from 'https://www.gstatic.com/firebasejs/10.12.3/firebase-firestore.js';
    
    const firebaseConfig = {
      apiKey: "AIzaSyAp75p-O1K8JN8xuiPzSunRKlU5Fag9Y7M",
      authDomain: "cerveceriaartesanal-9d7c7.firebaseapp.com",
      projectId: "cerveceriaartesanal-9d7c7",
      storageBucket: "cerveceriaartesanal-9d7c7.appspot.com",
      messagingSenderId: "656544704388",
      appId: "1:656544704388:web:07d33d75464c8436ed9fd1",
      measurementId: "G-4P6PE17L1R"
    };
    
    const app = initializeApp(firebaseConfig);
    
    // Validacion y envio del formulario de reserva
    
    const reservaForm = document.getElementById("formulario");
    
    
    reservaForm.addEventListener("submit", function (event) {
      event.preventDefault();
    
     const {nombreRes, emailRes, telefonoRes, cantidadPerRes, fechaRes, horaRes, tipoMesaRes, preferenciaRes, 
        comentarioRes} = reservaForm.elements;
     
      if (!nombreRes.value.trim() || nombreRes.value.lenght <= 2) {
        alert("Se requiere su nombre");
        return;
      }

      if (!emailRes.value.trim() || !isValidEmail(emailRes.value)) {
        alert("Ingrese un email válido.");
        return;
      }

      if (!telefonoRes.value.trim() || telefonoRes.value.lenght <= 2 || !isNaN(telefonoRes) ) {
        alert("Ingrese un telefono válido.");
        return;
      }
    
      if (cantidadPerRes.value.lenght <= 0) {
        alert("Ingrese un número válido de personas");
        return;
      }
    
      if (!fechaRes.value.trim()) {
        alert(
          "Ingrese una fecha válida"
        );
        return;
      }

          
      if (!horaRes.value.trim()) {
        alert(
          "Ingrese una fecha válida"
        );
        return;
      }
    
      const db = getFirestore(app);
        // Add a new document in collection "reservas"
        const docRef = addDoc(collection(db,"reservas"),{
          nombre: nombreRes.value,
          email: emailRes.value,
          telefono: telefonoRes.value,
          cantidad: cantidadPerRes.value,
          fecha: fechaRes.value,
          hora: horaRes.value,
          tipo : tipoMesaRes.value,
          preferencia: preferenciaRes.value,
          comentarios: comentarioRes.value

      });
    
      alert("Reserva efectuada con éxito: " +nombreRes.value+", "+ fechaRes.value +", " + horaRes.value);
      reservaForm.reset();
    
      
    });
    
    function isValidEmail(email) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }
        </script>

</body>

</html>